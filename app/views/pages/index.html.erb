<div class="index">
<div class="jumbotron jumbotron_top">
<%= render 'partial/navbar' %>

<!-- search form -->
<div class="container">
   <div class="row">
     <div class="col-md-10 col-md-offset-1 text-center title-content">
       <h1>好きな時時間に 農家で働こう</h1>
       <h2>農家と学生を繋ぐ単発農家バイト</2>
     </div>
   </div> 
  </div>
  
  <!-- Search Form -->
  <div class="top-search-field">
    <%= form_tag search_path, method: :get do %>
      <div class="row">
        <div class="container">
          
          <%= hidden_field_tag :lat %>
          <%= hidden_field_tag :lng %>
              <div class="col-md-10 col-xs-10" style="padding-right: 0px">
                <%= text_field_tag :search, params[:search], placeholder: "希望の場所はどこですか？", class: "form-control",id:"top-search-form" %>
              </div>
              <div class="col-md-2 col-xs-2" style="padding-left: 0px; ">
                <%= submit_tag "検索", class: "btn btn-top-search" %>
              </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<!-- jobs -->
<div class="top-farmer-content">
    <section class="container">
    <h3><i class="fa fa-star"></i> 新着のお仕事</h3>
    <% @jobs.each do |job| %>
        <div class="col-md-4 col-sm-4">
            <div class="panel panel-default">
                <div class="panel-heading panel-job text-center" style="padding: 0;">
                    <%= link_to(job) do %>
                        <% job.job_images.each do |image| %>
	                        <%= attachment_image_tag image, :image, class:"panel-img col-md-4" %>
	                    <% end %>
                    <% end %>
                </div>

                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-8 col-xs-8">
                            <%= link_to job.name, job ,class:"panel-name"%><br>
                        </div>
                        <div class="price-card">
                            時給 <%= job.price_perhour %> 円     
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <% end %>
</section>
</div>
<!-- end jobs -->

<!-- what app? -->
<section class="what_app container">
    <h2 class="text-center">
        空いてる時間で、健康的な農場バイトしませんか？
    </h2>
    <div class="row what-app-images">
        <div class="col-md-4 col-sm-4">
              <%= image_tag 'top-farmer01.png', class: "top-what-image img-circle" %>
        </div>
        <div class="col-md-4 col-sm-4">
              <%= image_tag 'top-farmer02.png', class: "top-what-image img-circle" %>
        </div>
        <div class="col-md-4 col-sm-4">
              <%= image_tag 'top-farmer03.png' , class: "top-what-image img-circle" %>
        </div>
    </div>
        <p>学生のみなさん,空いている時間で農家バイトしませんか？ 単発なので、自分の好きな時間帯に好きなだけシフトを入れることができますよ！</p>
</section>
<!-- end what app? -->
<!-- what app 02? -->
<section class="what_app container">
    <h2 class="text-center">
        若い学生を戦力にしましょう！
    </h2>
    <div class="row what-app-images">
        <div class="col-md-4 col-sm-4">
              <%= image_tag 'top-student01.png', class: "top-what-image top-what-image02 img-circle" %>
        </div>
        <div class="col-md-4 col-sm-4">
              <%= image_tag 'top-student02.png', class: "top-what-image top-what-image02 img-circle" %>
        </div>
        <div class="col-md-4 col-sm-4">
              <%= image_tag 'top-student01.png' , class: "top-what-image top-what-image02 img-circle" %>
        </div>
    </div>
        <p>農家のみなさん、学生の若い力を借りてみてはいかがでしょうか？ 収穫や植え付けなど,スポットで人手を必要とする際にぴったりですよ！</p>
</section>
<!-- end what app 02? -->
</div>
<%= render 'partial/footer' %>
  <script>
  function init() {
  
    var input = /** @type {!HTMLInputElement} */(
        document.getElementById('top-search-form'));
  
    var autocomplete = new google.maps.places.Autocomplete(input);
    
    autocomplete.addListener('place_changed', function() {
  
      var place = autocomplete.getPlace();
      var lat = place.geometry.location.lat();
      var lng = place.geometry.location.lng();
  
      document.getElementById('lat').value = lat ;
      document.getElementById('lng').value = lng ;
      
      alert(lat);
      alert(lng);
  
      if (!place.geometry) {
        window.alert("Autocomplete's returned place contains no geometry");
        return;
      }
  
    });
  }
  
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgUpeCKqhlUcC1vyYjH8-YZVsX9R-VjQI&signed_in=true&libraries=places&callback=init"
      async defer></script>
